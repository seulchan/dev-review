# Week 2 â€” Build a Multi-Modal Chatbot: LLMs, Gradio UI, and Agents in Action

## ğŸ§­ ëª©ì°¨

1. [Gradioë¥¼ í™œìš©í•œ ë¹ ë¥¸ UI í”„ë¡œí† íƒ€ì´í•‘](#gradioë¥¼-í™œìš©í•œ-ë¹ ë¥¸-ui-í”„ë¡œí† íƒ€ì´í•‘)
2. [ì±—ë´‡, ì»¨í…ìŠ¤íŠ¸, ë©€í‹°ìƒ· í”„ë¡¬í”„íŠ¸](#ì±—ë´‡-ì»¨í…ìŠ¤íŠ¸-ë©€í‹°ìƒ·-í”„ë¡¬í”„íŠ¸)
3. [ë„êµ¬ì™€ í•¨ìˆ˜ í˜¸ì¶œ(Function Calling)](#ë„êµ¬ì™€-í•¨ìˆ˜-í˜¸ì¶œfunction-calling)
4. [ì—ì´ì „íŠ¸ì™€ ë©€í‹°ëª¨ë‹¬ ì–´ì‹œìŠ¤í„´íŠ¸](#ì—ì´ì „íŠ¸ì™€-ë©€í‹°ëª¨ë‹¬-ì–´ì‹œìŠ¤í„´íŠ¸)
5. [í•µì‹¬ ìš”ì•½](#í•µì‹¬-ìš”ì•½)
6. [ì½”ë“œ](#ì½”ë“œ)

---

## Gradioë¥¼ í™œìš©í•œ ë¹ ë¥¸ UI í”„ë¡œí† íƒ€ì´í•‘

* **ëª©ì :** ëª‡ ì¤„ì˜ ì½”ë“œë¡œ LLM ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê¸°.

* **í•µì‹¬ íŒ¨í„´:**

  ```python
  import gradio as gr
  def greet(name): return f"Hello, {name}!"
  gr.Interface(fn=greet, inputs="text", outputs="text").launch()
  ```

---

## ì±—ë´‡, ì»¨í…ìŠ¤íŠ¸, ë©€í‹°ìƒ· í”„ë¡¬í”„íŠ¸

* **ëª©í‘œ:** Gradioì˜ `ChatInterface`ë¡œ ê³ ê°ì§€ì›ìš© ì±—ë´‡ êµ¬í˜„
* **ëŒ€í™” ë©”ëª¨ë¦¬:** ì‹¤ì œë¡œëŠ” **ë§¤ ìš”ì²­ë§ˆë‹¤ ì „ì²´ íˆìŠ¤í† ë¦¬ ì¬ì „ì†¡**, ë‚´ë¶€ ê¸°ì–µ ì—†ìŒ
* **í”„ë¡¬í”„íŠ¸ ì „ëµ:**

  * **System message**: ì—ì´ì „íŠ¸ ì„±ê²©Â·ì—­í•  ì •ì˜ (â€œì¹œì ˆí•œ ì„¸ì¼ì¦ˆ ì–´ì‹œìŠ¤í„´íŠ¸â€)
  * **One-shot / Multi-shot ì˜ˆì‹œ**: ì–´ì¡°ì™€ ë‹µë³€ ì˜ˆì‹œ ì œê³µìœ¼ë¡œ ìŠ¤íƒ€ì¼ ê³ ì •
* **ë™ì  ì»¨í…ìŠ¤íŠ¸ ì£¼ì…:**

  * íŠ¹ì • í‚¤ì›Œë“œ(ì˜ˆ: â€œë²¨íŠ¸â€) ê°ì§€ â†’ ê´€ë ¨ ì •ë³´ system promptë¡œ ì¶”ê°€
  * ë¯¸ë‹ˆ RAGì²˜ëŸ¼ ì‘ë™, ëŸ°íƒ€ì„ì— ì™¸ë¶€ ì§€ì‹ ì‚½ì…
* **í•µì‹¬ êµí›ˆ:**
  ì»¨í…ìŠ¤íŠ¸ = ê¸°ì¡´ ëŒ€í™” íˆìŠ¤í† ë¦¬ + ì‹œìŠ¤í…œ ê·œì¹™ + ë™ì ìœ¼ë¡œ ì¶”ê°€ëœ ì •ë³´

---

## ë„êµ¬ì™€ í•¨ìˆ˜ í˜¸ì¶œ(Function Calling)

* **ì •ì˜:** LLMì´ ì™¸ë¶€ í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ **ë°ì´í„°ë‚˜ ê³„ì‚°**ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥

* **ì‘ë™ ë°©ì‹:**

  1. Python í•¨ìˆ˜ ì •ì˜ (`get_ticket_price(city)`)
  2. JSON ìŠ¤í‚¤ë§ˆë¡œ ì„¤ëª… (`tools=[{name, description, parameters}]`)
  3. API í˜¸ì¶œ ì‹œ `tools` ì¸ìë¡œ ì „ë‹¬
  4. ëª¨ë¸ì´ ë„êµ¬ í˜¸ì¶œ ìš”ì²­ ì‹œ, í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³  `"tool"` ë©”ì‹œì§€ë¡œ ê²°ê³¼ ë°˜í™˜

* **ì˜ˆì‹œ:** í•­ê³µê¶Œ ê°€ê²©ì„ ì¡°íšŒí•˜ëŠ” `get_ticket_price()` í•¨ìˆ˜ í˜¸ì¶œ

* **í•µì‹¬ ê°œë…:**
  ì»¨í…ìŠ¤íŠ¸ ì£¼ì…ê³¼ ìœ ì‚¬í•˜ê²Œ, LLMì€ â€œìš”ì²­ â†’ í•¨ìˆ˜ ì‹¤í–‰ â†’ ê²°ê³¼ ë°˜ì˜â€ ë£¨í”„ë¥¼ ìˆ˜í–‰

---

## ì—ì´ì „íŠ¸ì™€ ë©€í‹°ëª¨ë‹¬ ì–´ì‹œìŠ¤í„´íŠ¸

* **ì •ì˜:** íŠ¹ì • ì—­í• (ì´ë¯¸ì§€ ìƒì„±, ìŒì„± ë³€í™˜ ë“±)ì„ ìˆ˜í–‰í•˜ëŠ” **ììœ¨ì  ëª¨ë“ˆ**
* **êµ¬í˜„ëœ ì—ì´ì „íŠ¸:**

  * **Artist agent**: DALLÂ·E 3ì„ ì´ìš©í•´ ëª©ì ì§€ ì´ë¯¸ì§€ë¥¼ ìƒì„±
  * **Talker agent**: TTS(Text-to-Speech)ë¡œ ì‘ë‹µì„ ìŒì„±ìœ¼ë¡œ ì½ê¸°
* **í†µí•© êµ¬ì¡°:**

  * ì±„íŒ… ë¡œì§ í™•ì¥ â†’ íˆ´ í˜¸ì¶œ ì‹œ artistÂ·talker ë³‘í–‰ ì‹¤í–‰
* **í”„ë ˆì„ì›Œí¬ ê°œë…:**

  * **Tools** = ë‹¨ìˆœ í•¨ìˆ˜
  * **Agents** = í•¨ìˆ˜ + ëª©ì  + ììœ¨ì„± + ë©€í‹°ëª¨ë‹¬ ëŠ¥ë ¥
  * ì´ë“¤ì˜ ê²°í•© = **ë©€í‹°ëª¨ë‹¬ ì—ì´ì „í‹± AI ì‹œìŠ¤í…œ**

---

## í•µì‹¬ ìš”ì•½

* **API êµ¬ì¡°ëŠ” ê±°ì˜ ë™ì¼**í•˜ë©° ë¬¸ë²• ì°¨ì´ë§Œ ìˆìŒ
* **Gradio**ë¡œ ë¹ ë¥´ê³  ì§ê´€ì ì¸ í”„ë¡œí† íƒ€ì´í•‘ ê°€ëŠ¥
* ì±—ë´‡ì˜ "ê¸°ì–µ"ì€ ì‹¤ì œ ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ì „ì²´ ëŒ€í™” ì¬ì „ì†¡ ë°©ì‹
* ë„êµ¬(Function Call)ëŠ” í–‰ë™ ê°€ëŠ¥í•œ ëª¨ë¸ì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œ
* **ì—ì´ì „íŠ¸**ëŠ” ì—¬ëŸ¬ ëª¨ë¸ê³¼ ëª¨ë‹¬ë¦¬í‹°ë¥¼ ì—°ê²°í•˜ëŠ” ê³ ë„í™”ëœ í˜•íƒœ
* ì‹¤ìŠµ íë¦„: **API â†’ UI â†’ ì±—ë´‡ â†’ íˆ´ â†’ ì—ì´ì „íŠ¸ ì•±**

---

## ì½”ë“œ

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```python
# ============================================================
# ğŸ§  Week 2 â€” ì£¼ìš” ì½”ë“œ íŒ¨í„´
# ============================================================

# (1) Multi-Model API Calls
# OpenAI, Anthropic, Geminiì˜ ê³µí†µ í˜¸ì¶œ êµ¬ì¡°
messages = [{"role":"system","content":"You are a witty assistant."},
            {"role":"user","content":"Tell a data-science joke."}]
resp = client.chat.completions.create(model="gpt-4o-mini", messages=messages)
print(resp.choices[0].message.content)

# ------------------------------------------------------------

# (2) Gradio UI Wrapper
# ìµœì†Œí•œì˜ ì½”ë“œë¡œ LLM UI êµ¬ì¶•
import gradio as gr
def message_gpt(prompt):
    msgs=[{"role":"system","content":"You are helpful."},
          {"role":"user","content":prompt}]
    return client.chat.completions.create(model="gpt-4o-mini", messages=msgs)\
                .choices[0].message.content
gr.Interface(fn=message_gpt, inputs="text", outputs="markdown").launch()

# ------------------------------------------------------------

# (3) Streaming Generator
# ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ ì‹¤ì‹œê°„ ê²°ê³¼ í‘œì‹œ
def stream_gpt(prompt):
    msgs=[{"role":"system","content":"Helpful assistant."},
          {"role":"user","content":prompt}]
    result=""
    for chunk in client.chat.completions.create(
            model="gpt-4o-mini", messages=msgs, stream=True):
        if chunk.choices[0].delta.content:
            result += chunk.choices[0].delta.content
            yield result

# ------------------------------------------------------------

# (4) Tool Integration
# í•­ê³µê¶Œ ê°€ê²© ì¡°íšŒ ì˜ˆì‹œ
def get_ticket_price(city):
    prices={"london":799,"paris":899,"tokyo":1400,"berlin":499}
    return prices.get(city.lower(),"unknown")

tools=[{
  "type":"function",
  "function":{
    "name":"get_ticket_price",
    "description":"Return ticket price for a city.",
    "parameters":{"type":"object",
      "properties":{"destination_city":{"type":"string"}},
      "required":["destination_city"]}
}}]

# íˆ´ ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ëª¨ë¸ í˜¸ì¶œ
resp = client.chat.completions.create(
    model="gpt-4o-mini", messages=messages, tools=tools)

# ------------------------------------------------------------

# (5) Agentic Extension
# ì´ë¯¸ì§€ + ìŒì„± ì—ì´ì „íŠ¸ í†µí•©
def artist(city):
    return openai.images.generate(model="dall-e-3",
        prompt=f"Scenic view of {city} for airline brochure.",
        size="512x512").data[0].b64_json

def talker(text):
    speech = openai.audio.speech.create(model="gpt-4o-mini-tts", input=text)
    with open("speech.mp3","wb") as f: f.write(speech.audio)

# í†µí•© ì—ì´ì „íŠ¸: ì±„íŒ… + ì´ë¯¸ì§€ + ìŒì„±
def chat_agent(prompt, history=[]):
    reply = message_gpt(prompt)
    talker(reply)
    if "to" in prompt.lower(): artist(prompt.split("to")[-1].strip())
    return reply

# ============================================================
```

</details>
